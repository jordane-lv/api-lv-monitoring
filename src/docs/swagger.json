{
  "openapi": "3.0.3",
  "info": {
    "title": "API LV Monitoring",
    "version": "1.0.0"
  },
  "paths": {
    "/hosts": {
      "post": {
        "tags": ["Host"],
        "summary": "Criar um novo host",
        "description": "Recurso utilizado para fazer a criação de um novo host.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/definitions/CreateHost"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Criado"
          },
          "400": {
            "description": "O Host já existe ou algum dado que foi enviado é inválido.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "O host com nome 12345 EXP - EXEMPLO já existe."
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno da aplicação.",
            "content": {
              "application/json": {
                "schema": {            
                  "$ref": "#/errors/InternalErrors"
                }
              }
            }
          }
        }
      }
    },
    "/hosts/check": {
      "post": {
        "tags": ["Host"],
        "summary": "Verifica os dados dos hosts",
        "description": "Verifica se os dados da lista de hosts estão corretos.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/CreateHost"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Todos os dados dos hosts estão corretos."
          },
          "400": {
            "description": "Algum dos dados informado está incorreto.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "O nome do host \"EX@AMPLE\" está incorreto."
                  }
                }
              }
            }
          }
        }
      }
    },
    "/maps": {
      "post": {
        "tags": ["Mapa"],
        "summary": "Criar um novo mapa",
        "description": "Cria um novo mapa, adicionando dentro do mapa criado os hosts já cadastrados no sistema de monitoramento.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/definitions/CreateMap"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Criado"
          },
          "400": {
            "description": "O Mapa já existe ou não foram encontrados nenhum host cadastrado com o mesmo código do mapa, sendo assim ele não faz a criação do mapa.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "Não existem hosts cadastrados com o mesmo código do mapa."
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno da aplicação.",
            "content": {
              "application/json": {
                "schema": {            
                  "$ref": "#/errors/InternalErrors"
                }
              }
            }
          }
        }
      }
    },
    "/maps/check": {
      "post": {
        "tags": ["Mapa"],
        "summary": "Verifica os dados dos mapas.",
        "description": "Verifica se os dados da lista de mapas estão corretos.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/CreateMap"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Todos os dados dos mapas estão corretos."
          },
          "400": {
            "description": "Algum dos dados informado está incorreto.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "O nome do mapa \"EX@AMPLE\" está incorreto."
                  }
                }
              }
            }
          }
        }
      }
    },
    "/groups": {
      "post": {
        "tags": ["Grupos"],
        "summary": "Cria novos grupos",
        "description": "Criar novos grupos de host e usuário",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/definitions/CreateGroups"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Grupos Criados",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "hostGroupId": {
                      "type": "string"
                    },
                    "userGroupId": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "hostGroupId": "5432",
                    "userGroupId": "4523"
                  }
                }
              }
            }
          },
          "400": {
            "description": "A sigla enviada pode estar com formato inválido.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "message": "Nome do grupo inválido."
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erro interno da aplicação.",
            "content": {
              "application/json": {
                "schema": {            
                  "$ref": "#/errors/InternalErrors"
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "CreateHost": {
      "type": "object",
      "properties": {
        "codigo": {
          "type": "string"
        },
        "sigla": {
          "type": "string"
        },
        "nome_host": {
          "type": "string"
        },
        "ip": {
          "type": "string"
        },
        "tipo": {
          "type": "string",
          "enum": [ "olt", "switch", "router", "wireless", "server", "pop" ]
        }
      },
      "required": [ "codigo", "sigla", "nome_host", "ip" ],
      "example": {
        "codigo": "12345",
        "sigla": "EXP",
        "nome_host": "EXEMPLO",
        "ip": "10.0.0.1",
        "tipo": "switch"
      }
    },
    "CreateMap": {
      "type": "object",
      "properties": {
        "codigo": {
          "type": "string"
        },
        "sigla": {
          "type": "string"
        },
        "nome_mapa": {
          "type": "string"
        }
      },
      "required": ["codigo", "sigla", "nome_mapa"],
      "example": {
        "codigo": "12345",
        "sigla": "EXP",
        "nome_mapa": "MAPA DE EXEMPLO"
      }
    },
    "CreateGroups": {
      "type": "object",
      "properties": {
        "sigla": {
          "type": "string"
        }
      },
      "example": {
        "sigla": "EXP"
      }
    }
  },
  "errors": {
    "InternalErrors": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string"
          },
        "message": {
          "type": "string"
        }
      },
      "example": {
        "status": "error",
        "message": "Internal error"
      }
    }
  }
}
